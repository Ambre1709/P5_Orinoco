<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="utf-8" />
	<script src="https://kit.fontawesome.com/84c6d20721.js" crossorigin="anonymous"></script>
	<meta name="description" content="Vente d'oursons en peluche" />
	<link rel="stylesheet" href="style_teddy.css">
	<script src="https://kit.fontawesome.com/a076d05399.js"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://code.jquery.com/jquery-3.4.1.js"></script>
	<!--bouton barre de nav-->
	<script>
		$(document).ready(function(){
			$('#icon').click(function(){
				$('ul').toggleClass('active');
			});
		});
	</script>

	<!--bouton scroll top-->
	<script>
		$(document).ready(function(){
			$('#btnScrollToTop').click(function(){
				window.scrollTo({
					top: 0,
					left: 0,
					behavior:"smooth"
				});
			});
		});
	</script>
</head>
<body>
	<!---------------------------------------HEADER------------------------------------------------>
	<nav>
		<label class="logo">Orinoco</label>
		<ul>
			<li><a href="index.html"><i class="fas fa-home"></i>Accueil</a></li>
			<li><a class="iconShopping"><i class="fas fa-shopping-cart"></i>Panier</a></li>
		</ul>
		<label id="icon"><i class="fas fa-bars"></i></label>
	</nav>
	<!--------------------------------Images couleurs-------------------------------------------->
	<div class="container">
		<ul class="thumb">
			<li><a href="images/teddy_3.jpg" target="imgBox"><img src="images/thumb_teddy_3.jpg"></a></li>
			<li><a href="images/teddy_3_bleu.jpg" target="imgBox"><img src="images/thumb_teddy_3_bleu.jpg"></a></li>
			<li><a href="images/teddy_3_rose.jpg" target="imgBox"><img src="images/thumb_teddy_3_rose.jpg"></a></li>
		</ul>
		<div class="imgBox"><img src="images/teddy_3.jpg"></div>
	</div>
	<!-----------------------------------Selection couleurs + panier--------------------------------------------->
	<div class="container_info">
		<div class="info">
			<h3 class="tit" id="brand3">Loulou</h3>
			<p><span id="price3">20</span>€</p>
			
		</div>

		<div class="inputs">
			<input type="number" id="quantity3" name="quantity3" min="1" max="99" value="1">
			<select id="color3" name="color3" onclick="deleteE('message3')">
				<option value="color" disabled selected>Couleur</option>
				<option value="Marron">Marron</option>
				<option value="Bleu">Bleu</option>
				<option value="Rose">Rose</option>
			</select>
			<div>
				<button class="addTo" onclick="add(3)">Ajouter <i class="fas fa-shopping-cart"></i> </button>
			</div>
			<p id="message3"></p>
		</div>
	</div>
</div>
<!-----------------------------------panier--------------------------------------------->
<div class="cartBox">
	<div class="cart1">
		<i class="fa fa-close"></i>
		<h1>Panier</h1>
		<table></table>
	</div>
</div>
<script>
	window.onload = function(e){
		//Cart Box
		const price = document.querySelector('#price3');
		const iconShopping = document.querySelector('.iconShopping');
		const cartCloseBtn = document.querySelector('.fa-close');
		const cartBox = document.querySelector('.cartBox');
		const brand = document.querySelector('#brand3');
		const color = document.querySelector('#color3');
		iconShopping.addEventListener("click",function(){
			cartBox.classList.add('active');

		});
		cartCloseBtn.addEventListener("click",function(){
			cartBox.classList.remove('active');

		});

		//localstorage ou sessionstorage
		const addTo = document.getElementsByClassName('addTo');
		let items = [];
		for(let i=0; i<addTo.length; i++){
			addTo[i].addEventListener("click",function(e){
				console.log(brand.textContent);
				console.log(price3.textContent);
				if(typeof(Storage) !== 'undefined'){
					let item = {
						id:brand.innerText+color.value,
						name: brand.innerText,
						price: price.innerText,
						color: color.value,
						no:1
					};
					//nb d'articles
					if(JSON.parse(sessionStorage.getItem('items')) === null){
						items.push(item);
						sessionStorage.setItem("items",JSON.stringify(items));
					}else{
						const localItems = JSON.parse(sessionStorage.getItem("items"));
						localItems.map(data=>{
							if(item.id == data.id){
								item.no = data.no + 1;
							}else{
								items.push(data);
							}
						});
						items.push(item);
						sessionStorage.setItem("items",JSON.stringify(items));
						
					}
					
				}else{
					alert("LocalStorage n'est pas supporté");
				}
			});

		}
		//CARTBOX
		const cardBoxTable = cartBox.querySelector('table');
		let tableData = '';
		tableData += '<tr><th>Nom article</th><th>Couleur article</th><th>Nb article</th><th>Prix</th><th></th></tr>';
		if (JSON.parse(sessionStorage.getItem('items')) === null){
			tableData += '<tr><td colspan="5">Nb articles trouvés</td></tr>'
		}else{
			JSON.parse(sessionStorage.getItem('items')).map(data=>{
				tableData += '<tr><th>'+data.name+'</th><th>'+data.color+'</th><th>'+data.no+'</th><th>'+data.price+'</th><th><a href="#" onclick=Delete(e);>Delete</a></th></tr>';
			});
			function Delete(e){
				let items = [];
				JSON.parse(sessionStorage.getItem('items')).map(data=>{
					if(data.id == e.parentElement.parentElement.children[0].textContent){

						items.push(data);

					}
				});
				sessionStorage.setItem('items',JSON.stringify(items));
				window.location.reload();
			};
		}
		cardBoxTable.innerHTML = tableData;
	}
</script>
	<!-----------------------------------Selection couleurs--------------------------------------------->
	<script>
		var total= 0;
		var i = 1;
		var message = "Selectionner une couleur";
		var itemCost = [];

		function add(n){
			colorId = "color" + n;
			messageId = "message" + n;
			color = document.getElementById(colorId).value;
			if (color==="color"){
				document.getElementById(messageId).innerHTML = message;
				return 0;
			}
</script>
<!--------------------------------Images couleurs-------------------------------------------->
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script type="text/javascript">
	$(document).ready(function(){
		$('.thumb a').mouseover(function(e){
			e.preventDefault();
			$('.imgBox img').attr("src", $(this).attr("href"));
		})
	})
</script>
<!--------------------------------------------------------------------------------------->
</body>
</html>






